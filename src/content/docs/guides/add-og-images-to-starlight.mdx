---
title: Add OG images to Starlight
description: Add OG images to Starlight.
---

import { Steps } from '@astrojs/starlight/components'
import PackageManagerCommand from '@/components/PackageManagerCommand.astro'

## Steps by steps

<Steps>
1.  Start by installing the [`astro-og-canvas`](https://github.com/delucis/astro-og-canvas) package:
    <PackageManagerCommand command="add astro-og-canvas"/>

2.  Create the image endpoint with this code:

    ```ts
    //src/pages/og/[...route].ts

    import { getCollection } from 'astro:content'
    import { OGImageRoute } from 'astro-og-canvas'

    const entries = await getCollection('docs')

    const pages = Object.fromEntries(
      entries.map(({ data, id }) => [id, { data }]),
    )

    export const { getStaticPaths, GET } = OGImageRoute({
      pages,
      param: 'route',
      getImageOptions: (_path, page: (typeof pages)[number]) => {
        return {
          title: page.data.title,
          description: page.data.description,
          bgGradient: [[24, 24, 27]],
          border: { color: [63, 63, 70], width: 20 },
          padding: 120,
        }
      },
    })
    ```

3.  Override the `<Head/>` component:

    ```astro
    //src/components/Head.astro

    import type { Props } from '@astrojs/starlight/props' import Default from
    '@astrojs/starlight/components/Head.astro' const ogImageUrl = new URL(
    `/og/${Astro.props.id.replace(/\.\w+$/, '.png')}`, Astro.url, )

    <Default {...Astro.props}><slot /></Default>

    <meta property="og:image" content={ogImageUrl} />
    <meta name="twitter:image" content={ogImageUrl} />
    ```

4.  Configure Starlight in the `astro.config.ts` file:

        ```ts ins={8-10}
        //astro.config.ts
        import { defineConfig } from 'astro/config'
        import starlight from '@astrojs/starlight'

        export default defineConfig({
          integrations: [
            starlight({
              components: {
                Head: './src/components/Head.astro',
              },
            }),
          ],
        })
        ```

    </Steps>

Up to you to customize the image using the various options provided by [`astro-og-canvas`](https://github.com/delucis/astro-og-canvas/tree/latest/packages/astro-og-canvas#image-options).

## Resources

1. [Add Open Graph images to Starlight](https://hideoo.dev/notes/starlight-og-images) by HiDeoo.
